{"version":3,"file":"dx-grid-core.es.js","sources":["../src/plugins/grid-core/computeds.js","../src/plugins/sorting-state/reducers.js","../src/plugins/sorting-state/helpers.js","../src/utils/merge-sort.js","../src/utils/hierarchical-data.js","../src/plugins/integrated-sorting/computeds.js","../src/plugins/filtering-state/reducers.js","../src/plugins/filtering-state/helpers.js","../src/plugins/integrated-filtering/computeds.js","../src/plugins/grouping-state/constants.js","../src/plugins/grouping-state/reducers.js","../src/plugins/grouping-state/computeds.js","../src/plugins/integrated-grouping/constants.js","../src/plugins/integrated-grouping/computeds.js","../src/plugins/custom-grouping/computeds.js","../src/plugins/grouping-panel/helpers.js","../src/plugins/paging-state/reducers.js","../src/plugins/integrated-paging/computeds.js","../src/plugins/paging-panel/helpers.js","../src/plugins/selection-state/reducers.js","../src/plugins/integrated-selection/computeds.js","../src/plugins/editing-state/reducers.js","../src/plugins/editing-state/computeds.js","../src/plugins/editing-state/helpers.js","../src/plugins/table-column-reordering/constants.js","../src/plugins/table-column-reordering/reducers.js","../src/plugins/table/constants.js","../src/plugins/table-column-reordering/computeds.js","../src/plugins/table-column-resizing/computeds.js","../src/plugins/table-column-resizing/reducers.js","../src/plugins/table-edit-column/constants.js","../src/plugins/table-edit-row/constants.js","../src/plugins/table-header-row/constants.js","../src/plugins/table-edit-column/helpers.js","../src/plugins/table-edit-column/computeds.js","../src/plugins/table-edit-row/helpers.js","../src/plugins/table-edit-row/computeds.js","../src/plugins/table-filter-row/constants.js","../src/plugins/table-filter-row/helpers.js","../src/plugins/table-filter-row/computeds.js","../src/plugins/table-group-row/constants.js","../src/plugins/table-group-row/helpers.js","../src/plugins/table-group-row/computeds.js","../src/plugins/table-header-row/helpers.js","../src/plugins/table-header-row/computeds.js","../src/plugins/table-row-detail/constants.js","../src/plugins/table-row-detail/helpers.js","../src/plugins/table-row-detail/reducers.js","../src/plugins/table-row-detail/computeds.js","../src/plugins/table-selection/constants.js","../src/plugins/table-selection/helpers.js","../src/plugins/table-selection/computeds.js","../src/plugins/table/helpers.js","../src/utils/column.js","../src/plugins/table/computeds.js","../src/plugins/table-column-visibility/computeds.js","../src/column-chooser/computeds.js","../src/column-chooser/reducers.js","../src/utils/column-geometries.js","../src/utils/table.js","../src/utils/group-panel.js","../src/utils/messages-formatter.js"],"sourcesContent":["export const rowIdGetter = (getRowId, rows) => {\n  if (!getRowId) {\n    const map = new Map(rows.map((row, rowIndex) => [row, rowIndex]));\n    return row => map.get(row);\n  }\n  return getRowId;\n};\n\nconst defaultGetCellValue = (row, columnName) => row[columnName];\nexport const cellValueGetter = (getCellValue = defaultGetCellValue, columns) => {\n  let useFastAccessor = true;\n  const map = columns.reduce((acc, column) => {\n    if (column.getCellValue) {\n      useFastAccessor = false;\n      acc[column.name] = column.getCellValue;\n    }\n    return acc;\n  }, {});\n\n  if (useFastAccessor) {\n    return getCellValue;\n  }\n\n  return (row, columnName) => (map[columnName]\n    ? map[columnName](row, columnName)\n    : getCellValue(row, columnName));\n};\n","export const setColumnSorting = (state, {\n  columnName, direction, keepOther, sortIndex,\n}) => {\n  const { sorting } = state;\n\n  let nextSorting = [];\n  if (keepOther === true) {\n    nextSorting = sorting.slice();\n  }\n  if (Array.isArray(keepOther)) {\n    nextSorting = sorting.slice()\n      .filter(columnSorting => keepOther.indexOf(columnSorting.columnName) > -1);\n  }\n\n  const columnSortingIndex = sorting\n    .findIndex(columnSorting => columnSorting.columnName === columnName);\n  const columnSorting = sorting[columnSortingIndex];\n  const newColumnSorting = {\n    columnName,\n    direction: direction ||\n      (!columnSorting || columnSorting.direction === 'desc' ? 'asc' : 'desc'),\n  };\n\n  if (columnSortingIndex > -1) {\n    nextSorting.splice(columnSortingIndex, 1);\n  }\n\n  if (direction !== null) {\n    const newIndexFallback = columnSortingIndex > -1 ? columnSortingIndex : nextSorting.length;\n    const newIndex = sortIndex !== undefined ? sortIndex : newIndexFallback;\n    nextSorting.splice(newIndex, 0, newColumnSorting);\n  }\n\n  return {\n    sorting: nextSorting,\n  };\n};\n","export const getColumnSortingDirection = (sorting, columnName) => {\n  const columnSorting = sorting.filter(s => s.columnName === columnName)[0];\n  return columnSorting ? columnSorting.direction : null;\n};\n","/* eslint-disable no-plusplus, no-param-reassign, no-use-before-define, no-constant-condition */\n\nconst merge = (array, auxiliary, lo, mid, hi, compare) => {\n  let i = lo;\n  let j = mid + 1;\n  let k = lo;\n  while (true) {\n    const cmp = compare(array[i], array[j]);\n    if (cmp <= 0) {\n      auxiliary[k++] = array[i++];\n      if (i > mid) {\n        do {\n          auxiliary[k++] = array[j++];\n        } while (j <= hi);\n        break;\n      }\n    } else {\n      auxiliary[k++] = array[j++];\n      if (j > hi) {\n        do {\n          auxiliary[k++] = array[i++];\n        } while (i <= mid);\n        break;\n      }\n    }\n  }\n};\n\nconst sortArrayToAuxiliary = (array, auxiliary, lo, hi, compare) => {\n  if (hi < lo) return;\n  if (hi === lo) {\n    auxiliary[lo] = array[lo];\n    return;\n  }\n  const mid = Math.floor(lo + ((hi - lo) / 2));\n  sortAuxiliaryToArray(array, auxiliary, lo, mid, compare);\n  sortAuxiliaryToArray(array, auxiliary, mid + 1, hi, compare);\n  merge(array, auxiliary, lo, mid, hi, compare);\n};\n\nconst sortAuxiliaryToArray = (array, auxiliary, lo, hi, compare) => {\n  if (hi <= lo) return;\n  const mid = Math.floor(lo + ((hi - lo) / 2));\n  sortArrayToAuxiliary(array, auxiliary, lo, mid, compare);\n  sortArrayToAuxiliary(array, auxiliary, mid + 1, hi, compare);\n  merge(auxiliary, array, lo, mid, hi, compare);\n};\n\nexport default (\n  array,\n  compare = (a, b) => {\n    if (a < b) return -1;\n    if (a > b) return 1;\n    return 0;\n  },\n) => {\n  const result = array.slice();\n  const auxiliary = array.slice();\n  sortAuxiliaryToArray(result, auxiliary, 0, result.length - 1, compare);\n  return result;\n};\n","export const NODE_CHECK = Symbol('node');\n\nexport const rowsToTree = (rows, getRowLevelKey) => {\n  if (!rows.length) return rows;\n\n  const levels = [{ children: [] }];\n\n  rows.forEach((row) => {\n    const levelKey = getRowLevelKey(row);\n    if (levelKey) {\n      const levelIndex = levels.slice(1)\n        .findIndex(level => getRowLevelKey(level.root) === levelKey) + 1;\n      if (levelIndex > 0) {\n        levels.splice(levelIndex, levels.length - levelIndex);\n      }\n      const node = { [NODE_CHECK]: true, root: row, children: [] };\n      levels[levels.length - 1].children.push(node);\n      levels.push(node);\n    } else {\n      levels[levels.length - 1].children.push(row);\n    }\n  });\n\n  return levels[0].children;\n};\n\nexport const treeToRows = (tree, rows = []) => {\n  if (!tree.length) return tree;\n  return tree.reduce(\n    (acc, node) => {\n      if (node[NODE_CHECK]) {\n        acc.push(node.root);\n        treeToRows(node.children, rows);\n      } else {\n        acc.push(node);\n      }\n      return acc;\n    },\n    rows,\n  );\n};\n","import mergeSort from '../../utils/merge-sort';\nimport { NODE_CHECK, rowsToTree, treeToRows } from '../../utils/hierarchical-data';\n\nconst defaultCompare = (a, b) => {\n  if (a < b) return -1;\n  if (a > b) return 1;\n  return 0;\n};\n\nconst createCompare = (sorting, getColumnCompare, getComparableValue) =>\n  sorting.slice()\n    .reverse()\n    .reduce(\n      (prevCompare, columnSorting) => {\n        const { columnName } = columnSorting;\n        const inverse = columnSorting.direction === 'desc';\n        const columnCompare = (getColumnCompare && getColumnCompare(columnName)) || defaultCompare;\n\n        return (aRow, bRow) => {\n          const a = getComparableValue(aRow, columnName);\n          const b = getComparableValue(bRow, columnName);\n          const result = columnCompare(a, b);\n\n          if (result !== 0) {\n            return inverse ? -result : result;\n          }\n          return prevCompare(aRow, bRow);\n        };\n      },\n      () => 0,\n    );\n\nconst sortTree = (tree, compare) => {\n  const sortedTree = tree.map((node) => {\n    if (node[NODE_CHECK]) {\n      return {\n        ...node,\n        children: sortTree(node.children, compare),\n      };\n    }\n    return node;\n  });\n\n  return mergeSort(sortedTree, (a, b) =>\n    compare(a[NODE_CHECK] ? a.root : a, b[NODE_CHECK] ? b.root : b));\n};\n\nconst sortHierarchicalRows = (rows, compare, getRowLevelKey) => {\n  const tree = rowsToTree(rows, getRowLevelKey);\n\n  const sortedTree = sortTree(tree, compare);\n\n  return treeToRows(sortedTree);\n};\n\nexport const sortedRows = (\n  rows,\n  sorting,\n  getCellValue,\n  getColumnCompare,\n  isGroupRow,\n  getRowLevelKey,\n) => {\n  if (!sorting.length || !rows.length) return rows;\n\n  if (!getRowLevelKey) {\n    const compare = createCompare(sorting, getColumnCompare, getCellValue);\n    return mergeSort(rows.slice(), compare);\n  }\n\n  const compare = createCompare(sorting, getColumnCompare, (row, columnName) => {\n    if (isGroupRow(row)) {\n      if (row.groupedBy === columnName) {\n        return row.value;\n      }\n      return undefined;\n    }\n    return getCellValue(row, columnName);\n  });\n  return sortHierarchicalRows(\n    rows,\n    compare,\n    getRowLevelKey,\n  );\n};\n","export const setColumnFilter = (filters, { columnName, config }) => {\n  const filterIndex = filters.findIndex(f => f.columnName === columnName);\n  const nextState = filters.slice();\n\n  if (config) {\n    const filter = { columnName, ...config };\n    if (filterIndex > -1) {\n      nextState.splice(filterIndex, 1, filter);\n    } else {\n      nextState.push(filter);\n    }\n  } else {\n    nextState.splice(filterIndex, 1);\n  }\n\n  return nextState;\n};\n","export const getColumnFilterConfig = (filters, columnName) => {\n  if (!filters.length) { return null; }\n\n  const filter = filters.filter(s => s.columnName === columnName)[0];\n  if (!filter) return null;\n\n  const { columnName: _, ...config } = filter;\n  return config;\n};\n","import { NODE_CHECK, rowsToTree, treeToRows } from '../../utils/hierarchical-data';\n\nconst toLowerCase = value => String(value).toLowerCase();\n\nconst defaultPredicate = (value, filter) =>\n  toLowerCase(value).indexOf(toLowerCase(filter.value)) > -1;\n\nconst filterTree = (tree, predicate) =>\n  tree.reduce(\n    (acc, node) => {\n      if (node[NODE_CHECK]) {\n        const filteredChildren = filterTree(node.children, predicate);\n        if (filteredChildren.length > 0) {\n          acc.push({\n            ...node,\n            children: filteredChildren,\n          });\n          return acc;\n        } else if (predicate(node.root)) {\n          acc.push(node.root);\n          return acc;\n        }\n      }\n\n      if (predicate(node)) {\n        acc.push(node);\n        return acc;\n      }\n\n      return acc;\n    },\n    [],\n  );\n\nconst filterHierarchicalRows = (rows, predicate, getRowLevelKey, isGroupRow) => {\n  const tree = rowsToTree(rows, getRowLevelKey);\n\n  const filteredTree = filterTree(tree, (row) => {\n    if (isGroupRow(row)) {\n      if (row.collapsedRows) {\n        return row.collapsedRows.findIndex(predicate) > -1;\n      }\n      return false;\n    }\n    return predicate(row);\n  });\n\n  return treeToRows(filteredTree);\n};\n\nexport const filteredRows = (\n  rows,\n  filters,\n  getCellValue,\n  getColumnPredicate,\n  isGroupRow,\n  getRowLevelKey,\n) => {\n  if (!filters.length || !rows.length) return rows;\n\n  const predicate = filters.reduce(\n    (prevPredicate, filter) => {\n      const { columnName, ...filterConfig } = filter;\n      const customPredicate = getColumnPredicate && getColumnPredicate(columnName);\n      const columnPredicate = customPredicate || defaultPredicate;\n\n      return (row) => {\n        const result = columnPredicate(getCellValue(row, columnName), filterConfig, row);\n        return result && prevPredicate(row);\n      };\n    },\n    () => true,\n  );\n\n  if (!getRowLevelKey) {\n    return rows.filter(predicate);\n  }\n\n  return filterHierarchicalRows(rows, predicate, getRowLevelKey, isGroupRow);\n};\n","export const GROUP_KEY_SEPARATOR = '|';\nexport const GROUP_ADD_MODE = 'add';\nexport const GROUP_REMOVE_MODE = 'remove';\nexport const GROUP_REORDER_MODE = 'reorder';\n","import { GROUP_KEY_SEPARATOR } from './constants';\n\nexport const groupByColumn = (state, { columnName, groupIndex }) => {\n  const grouping = state.grouping.slice();\n  const groupingIndex = grouping.findIndex(g => g.columnName === columnName);\n  let targetIndex = groupIndex;\n\n  if (groupingIndex > -1) {\n    grouping.splice(groupingIndex, 1);\n  } else if (groupIndex === undefined) {\n    targetIndex = grouping.length;\n  }\n\n  if (targetIndex > -1) {\n    grouping.splice(targetIndex, 0, {\n      columnName,\n    });\n  }\n\n\n  const ungroupedColumnIndex = state.grouping.findIndex((group, index) =>\n    !grouping[index] || group.columnName !== grouping[index].columnName);\n  if (ungroupedColumnIndex === -1) {\n    return {\n      grouping,\n    };\n  }\n\n  const filteredExpandedGroups = state.expandedGroups.filter(group =>\n    group.split(GROUP_KEY_SEPARATOR).length <= ungroupedColumnIndex);\n  if (filteredExpandedGroups.length === state.expandedGroups.length) {\n    return {\n      grouping,\n    };\n  }\n\n  return {\n    grouping,\n    expandedGroups: filteredExpandedGroups,\n  };\n};\n\nexport const toggleExpandedGroups = (state, { groupKey }) => {\n  const expandedGroups = state.expandedGroups.slice();\n  const groupKeyIndex = expandedGroups.indexOf(groupKey);\n\n  if (groupKeyIndex > -1) {\n    expandedGroups.splice(groupKeyIndex, 1);\n  } else {\n    expandedGroups.push(groupKey);\n  }\n\n  return {\n    expandedGroups,\n  };\n};\n\nexport const draftGroupingChange = (state, { columnName, groupIndex }) =>\n  ({ groupingChange: { columnName, groupIndex } });\n\nexport const cancelGroupingChange = () => ({ groupingChange: null });\n","import { GROUP_ADD_MODE, GROUP_REMOVE_MODE, GROUP_REORDER_MODE } from './constants';\n\nexport const draftGrouping = (grouping, groupingChange) => {\n  if (!groupingChange) return grouping;\n\n  const { columnName, groupIndex } = groupingChange;\n  let result = grouping.slice();\n\n  if (groupIndex !== -1) {\n    result = result.filter(g => g.columnName !== columnName);\n    result.splice(groupIndex, 0, {\n      columnName,\n      draft: grouping.length > result.length ? GROUP_REORDER_MODE : GROUP_ADD_MODE,\n    });\n  } else {\n    result = result.map(g => (g.columnName === columnName\n      ? { columnName, draft: GROUP_REMOVE_MODE }\n      : g));\n  }\n\n  return result;\n};\n","export const GRID_GROUP_TYPE = 'group';\nexport const GRID_GROUP_CHECK = Symbol(`${GRID_GROUP_TYPE}_check`);\nexport const GRID_GROUP_LEVEL_KEY = Symbol(`${GRID_GROUP_TYPE}_levelKey`);\n\n","import {\n  GROUP_KEY_SEPARATOR,\n} from '../grouping-state/constants';\nimport {\n  GRID_GROUP_TYPE,\n  GRID_GROUP_CHECK,\n  GRID_GROUP_LEVEL_KEY,\n} from './constants';\n\nexport const groupRowChecker = row => row[GRID_GROUP_CHECK];\n\nexport const groupRowLevelKeyGetter = row => row[GRID_GROUP_LEVEL_KEY];\n\nconst defaultColumnCriteria = value => ({\n  key: String(value),\n  value,\n});\n\nexport const groupedRows = (\n  rows,\n  grouping,\n  getCellValue,\n  getColumnCriteria,\n  keyPrefix = '',\n) => {\n  if (!grouping.length) return rows;\n\n  const { columnName } = grouping[0];\n  const groupCriteria = (getColumnCriteria && getColumnCriteria(columnName))\n    || defaultColumnCriteria;\n  const groups = rows\n    .reduce((acc, row) => {\n      const { key, value = key } = groupCriteria(getCellValue(row, columnName), row);\n      const sameKeyItems = acc.get(key);\n\n      if (!sameKeyItems) {\n        acc.set(key, [value, key, [row]]);\n      } else {\n        sameKeyItems[2].push(row);\n      }\n      return acc;\n    }, new Map());\n\n  const groupedBy = grouping[0].columnName;\n  const nestedGrouping = grouping.slice(1);\n  return [...groups.values()]\n    .reduce((acc, [value, key, items]) => {\n      const compoundKey = `${keyPrefix}${key}`;\n      acc.push({\n        [GRID_GROUP_CHECK]: true,\n        [GRID_GROUP_LEVEL_KEY]: `${GRID_GROUP_TYPE}_${groupedBy}`,\n        groupedBy,\n        compoundKey,\n        key,\n        value,\n      });\n      acc.push(...groupedRows(\n        items,\n        nestedGrouping,\n        getCellValue,\n        getColumnCriteria,\n        `${compoundKey}${GROUP_KEY_SEPARATOR}`,\n      ));\n      return acc;\n    }, []);\n};\n\nexport const expandedGroupRows = (rows, grouping, expandedGroups) => {\n  if (!grouping.length) return rows;\n\n  const groupingColumnNames = grouping.map(columnGrouping => columnGrouping.columnName);\n  let currentGroupExpanded = true;\n  let currentGroupLevel = 0;\n\n  return rows.reduce((acc, row) => {\n    if (!row[GRID_GROUP_CHECK]) {\n      if (currentGroupExpanded) {\n        acc.push(row);\n      } else {\n        acc[acc.length - 1].collapsedRows.push(row);\n      }\n      return acc;\n    }\n\n    const groupLevel = groupingColumnNames.indexOf(row.groupedBy);\n    if (groupLevel > currentGroupLevel && !currentGroupExpanded) {\n      return acc;\n    }\n\n    currentGroupExpanded = expandedGroups.has(row.compoundKey);\n    currentGroupLevel = groupLevel;\n\n    if (currentGroupExpanded) {\n      acc.push(row);\n    } else {\n      acc.push({\n        ...row,\n        collapsedRows: [],\n      });\n    }\n\n    return acc;\n  }, []);\n};\n","import {\n  GROUP_KEY_SEPARATOR,\n} from '../grouping-state/constants';\nimport {\n  GRID_GROUP_TYPE,\n  GRID_GROUP_CHECK,\n  GRID_GROUP_LEVEL_KEY,\n} from '../integrated-grouping/constants';\n\nexport const customGroupedRows = (\n  currentRows,\n  grouping,\n  getChildGroups,\n  rootRows = currentRows,\n  keyPrefix = '',\n) => {\n  if (!currentRows || !currentRows.length) return [];\n  if (!grouping.length) return currentRows;\n\n  const groupedBy = grouping[0].columnName;\n  const nestedGrouping = grouping.slice(1);\n  return getChildGroups(currentRows, grouping[0], rootRows)\n    .reduce((acc, { key, value = key, childRows }) => {\n      const compoundKey = `${keyPrefix}${key}`;\n      acc.push({\n        [GRID_GROUP_CHECK]: true,\n        [GRID_GROUP_LEVEL_KEY]: `${GRID_GROUP_TYPE}_${groupedBy}`,\n        groupedBy,\n        compoundKey,\n        key,\n        value,\n      });\n      acc.push(...customGroupedRows(\n        childRows,\n        nestedGrouping,\n        getChildGroups,\n        rootRows,\n        `${compoundKey}${GROUP_KEY_SEPARATOR}`,\n      ));\n      return acc;\n    }, []);\n};\n\nexport const customGroupingRowIdGetter = (getRowId, rows) => {\n  const firstRow = rows.find(row => !row[GRID_GROUP_CHECK]);\n  if (!firstRow || getRowId(firstRow)) {\n    return getRowId;\n  }\n  const map = new Map(rows\n    .filter(row => !row[GRID_GROUP_CHECK])\n    .map((row, rowIndex) => [row, rowIndex]));\n\n  return row => map.get(row);\n};\n","export const groupingPanelItems = (columns, grouping) =>\n  grouping.map(({ columnName, draft }) => {\n    const column = columns.find(c => c.name === columnName);\n    return {\n      column,\n      draft,\n    };\n  });\n","export const setCurrentPage = (prevPage, page) => page;\nexport const setPageSize = (prevPageSize, size) => size;\n","const PAGE_HEADERS_OVERFLOW_ERROR =\n  'Max row level exceeds the page size. Consider increasing the page size.';\n\nexport const paginatedRows = (rows, pageSize, page) => (\n  pageSize ?\n    rows.slice(pageSize * page, pageSize * (page + 1)) :\n    rows\n);\n\nexport const rowsWithPageHeaders = (rows, pageSize, getRowLevelKey) => {\n  if (!pageSize || !getRowLevelKey) return rows;\n\n  let result = rows.slice();\n\n  let headerRows = [];\n  let currentIndex = 0;\n  while (result.length > currentIndex) {\n    const row = result[currentIndex];\n    const levelKey = getRowLevelKey(row);\n    if (levelKey) {\n      const headerIndex = headerRows.findIndex(headerRow => getRowLevelKey(headerRow) === levelKey);\n      if (headerIndex === -1) {\n        headerRows = [...headerRows, row];\n      } else {\n        headerRows = [...headerRows.slice(0, headerIndex), row];\n      }\n      if (headerRows.length >= pageSize) {\n        throw new Error(PAGE_HEADERS_OVERFLOW_ERROR);\n      }\n    }\n    const indexInPage = currentIndex % pageSize;\n    if (indexInPage < headerRows.length && row !== headerRows[indexInPage]) {\n      result = [\n        ...result.slice(0, currentIndex),\n        headerRows[indexInPage],\n        ...result.slice(currentIndex),\n      ];\n    }\n    currentIndex += 1;\n  }\n\n  return result;\n};\n\nexport const pageCount = (count, pageSize) => (\n  pageSize ? Math.ceil(count / pageSize) : 1\n);\n\nexport const rowCount = rows => rows.length;\n","export const firstRowOnPage = (currentPage, pageSize, totalCount) => {\n  if (totalCount === 0) {\n    return 0;\n  }\n  return pageSize ? (currentPage * pageSize) + 1 : 1;\n};\n\nexport const lastRowOnPage = (currentPage, pageSize, totalRowCount) => {\n  let result = totalRowCount;\n  if (pageSize) {\n    const index = (currentPage + 1) * pageSize;\n    result = index > totalRowCount ? totalRowCount : index;\n  }\n\n  return result;\n};\n","const setRowSelection = (selection, { rowId, selected }) => {\n  const selectedRows = selection.slice();\n  const selectedIndex = selectedRows.indexOf(rowId);\n\n  let isRowSelected = selected;\n\n  if (isRowSelected === undefined) {\n    isRowSelected = selectedIndex === -1;\n  }\n\n  if (selectedIndex > -1 && !isRowSelected) {\n    selectedRows.splice(selectedIndex, 1);\n  } else if (selectedIndex === -1 && isRowSelected) {\n    selectedRows.push(rowId);\n  }\n\n  return selectedRows;\n};\n\nexport const setRowsSelection = (selection, { rowIds, selected }) => {\n  if (rowIds.length === 1) {\n    return setRowSelection(selection, { rowId: rowIds[0], selected });\n  }\n\n  const rowIdsSet = new Set(rowIds);\n\n  let isRowsSelected = selected;\n  if (isRowsSelected === undefined) {\n    const availableSelection = selection.filter(rowId => rowIdsSet.has(rowId));\n    isRowsSelected = availableSelection.length !== rowIdsSet.size;\n  }\n\n  if (isRowsSelected) {\n    const selectionSet = new Set(selection);\n    return [\n      ...selection,\n      ...rowIds.filter(rowId => !selectionSet.has(rowId)),\n    ];\n  }\n\n  return selection.filter(rowId => !rowIdsSet.has(rowId));\n};\n","export const getAvailableToSelect = (rows, getRowId, isGroupRow) => {\n  let dataRows = rows;\n  if (isGroupRow) {\n    dataRows = dataRows.filter(row => !isGroupRow(row));\n  }\n  return dataRows.map(row => getRowId(row));\n};\n\nexport const someSelected = ({ selection, availableToSelect }) =>\n  availableToSelect.length !== 0 && selection.size !== 0\n    && availableToSelect.some(elem => selection.has(elem))\n    && availableToSelect.some(elem => !selection.has(elem));\n\nexport const allSelected = ({ selection, availableToSelect }) =>\n  selection.size !== 0 && availableToSelect.length !== 0\n    && !availableToSelect.some(elem => !selection.has(elem));\n","export const startEditRows = (prevEditingRows, { rowIds }) =>\n  [...prevEditingRows, ...rowIds];\n\nexport const stopEditRows = (prevEditingRows, { rowIds }) => {\n  const rowIdSet = new Set(rowIds);\n  return prevEditingRows.filter(id => !rowIdSet.has(id));\n};\n\nexport const addRow = (addedRows, { row } = { row: {} }) => [...addedRows, row];\n\nexport const changeAddedRow = (addedRows, { rowId, change }) => {\n  const result = addedRows.slice();\n  result[rowId] = { ...result[rowId], ...change };\n  return result;\n};\n\nexport const cancelAddedRows = (addedRows, { rowIds }) => {\n  const result = [];\n  const indexSet = new Set(rowIds);\n  addedRows.forEach((row, index) => {\n    if (!indexSet.has(index)) {\n      result.push(row);\n    }\n  });\n  return result;\n};\n\nexport const changeRow = (prevChangedRows, { rowId, change }) => {\n  const prevChange = prevChangedRows[rowId] || {};\n  return {\n    ...prevChangedRows,\n    [rowId]: {\n      ...prevChange,\n      ...change,\n    },\n  };\n};\n\nexport const cancelChanges = (prevChangedRows, { rowIds }) => {\n  const result = { ...prevChangedRows };\n  rowIds.forEach((rowId) => {\n    delete result[rowId];\n  });\n  return result;\n};\n\nexport const deleteRows = (deletedRows, { rowIds }) => [...deletedRows, ...rowIds];\n\nexport const cancelDeletedRows = (deletedRows, { rowIds }) => {\n  const rowIdSet = new Set(rowIds);\n  return deletedRows.filter(rowId => !rowIdSet.has(rowId));\n};\n","export const changedRowsByIds = (changes, rowIds) => {\n  const result = {};\n  rowIds.forEach((rowId) => {\n    result[rowId] = changes[rowId];\n  });\n  return result;\n};\n\nexport const addedRowsByIds = (addedRows, rowIds) => {\n  const rowIdSet = new Set(rowIds);\n  const result = [];\n  addedRows.forEach((row, index) => {\n    if (rowIdSet.has(index)) {\n      result.push(row);\n    }\n  });\n  return result;\n};\n\nconst defaultCreateRowChange = (row, value, columnName) => ({ [columnName]: value });\nexport const createRowChangeGetter = (\n  createRowChange = defaultCreateRowChange,\n  columnExtensions = [],\n) => {\n  const map = columnExtensions.reduce((acc, columnExtension) => {\n    if (columnExtension.createRowChange) {\n      acc[columnExtension.columnName] = columnExtension.createRowChange;\n    }\n    return acc;\n  }, {});\n\n  return (row, value, columnName) => {\n    if (map[columnName]) {\n      return map[columnName](row, value, columnName);\n    }\n    return createRowChange(row, value, columnName);\n  };\n};\n","export const getRowChange = (changedRows, rowId) => changedRows[rowId] || {};\n","export const TABLE_REORDERING_TYPE = 'reordering';\n","export const changeColumnOrder = (order, { sourceColumnName, targetColumnName }) => {\n  const sourceColumnIndex = order.indexOf(sourceColumnName);\n  const targetColumnIndex = order.indexOf(targetColumnName);\n  const newOrder = order.slice();\n\n  newOrder.splice(sourceColumnIndex, 1);\n  newOrder.splice(targetColumnIndex, 0, sourceColumnName);\n  return newOrder;\n};\n","export const TABLE_DATA_TYPE = 'data';\nexport const TABLE_NODATA_TYPE = 'nodata';\n","import { TABLE_DATA_TYPE } from '../table/constants';\nimport { TABLE_REORDERING_TYPE } from './constants';\n\nexport const orderedColumns = (tableColumns, order) => {\n  const result = tableColumns.slice();\n\n  result.sort((a, b) => {\n    if (a.type !== TABLE_DATA_TYPE || b.type !== TABLE_DATA_TYPE) return 0;\n\n    const aPos = order.indexOf(a.column.name);\n    const bPos = order.indexOf(b.column.name);\n    return aPos - bPos;\n  });\n\n  return result;\n};\n\nexport const tableHeaderRowsWithReordering = tableHeaderRows => [\n  {\n    key: TABLE_REORDERING_TYPE,\n    type: TABLE_REORDERING_TYPE,\n    height: 0,\n  },\n  ...tableHeaderRows,\n];\n\nexport const draftOrder = (order, sourceColumnIndex, targetColumnIndex) => {\n  if (sourceColumnIndex === -1\n    || targetColumnIndex === -1\n    || sourceColumnIndex === targetColumnIndex) {\n    return order;\n  }\n\n  const result = order.slice();\n  const sourceColumn = order[sourceColumnIndex];\n  result.splice(sourceColumnIndex, 1);\n  result.splice(targetColumnIndex, 0, sourceColumn);\n\n  return result;\n};\n","const UNSET_COLUMN_WIDTH_ERROR = [\n  'The \"$1\" column\\'s width is not specified.',\n  'The TableColumnResizing plugin requires that all columns have the specified width.',\n].join('\\n');\n\nexport const tableColumnsWithWidths = (tableColumns, columnWidths, draftColumnWidths) =>\n  tableColumns\n    .reduce((acc, tableColumn) => {\n      if (tableColumn.type === 'data') {\n        const columnName = tableColumn.column.name;\n        const width = draftColumnWidths[columnName] || columnWidths[columnName];\n        if (width === undefined) {\n          throw new Error(UNSET_COLUMN_WIDTH_ERROR.replace('$1', columnName));\n        }\n        acc.push({ ...tableColumn, width });\n      } else {\n        acc.push(tableColumn);\n      }\n      return acc;\n    }, []);\n","const MIN_SIZE = 40;\n\nexport const changeTableColumnWidths = (state, { shifts }) => {\n  const { columnWidths } = state;\n  const updatedColumnWidths = Object.keys(shifts)\n    .reduce((acc, columnName) => {\n      const size = Math.max(MIN_SIZE, columnWidths[columnName] + shifts[columnName]);\n      return Object.assign(acc, { [columnName]: size });\n    }, {});\n  return {\n    ...state,\n    columnWidths: { ...columnWidths, ...updatedColumnWidths },\n    draftColumnWidths: {},\n  };\n};\n\nexport const changeDraftTableColumnWidths = (state, { shifts }) => {\n  const { columnWidths, draftColumnWidths } = state;\n  const updatedDraftColumnWidths = Object.keys(shifts)\n    .reduce((acc, columnName) => {\n      if (shifts[columnName] === null) {\n        delete acc[columnName];\n        return acc;\n      }\n      const size = Math.max(MIN_SIZE, columnWidths[columnName] + shifts[columnName]);\n      return Object.assign(acc, { [columnName]: size });\n    }, Object.assign({}, draftColumnWidths));\n  return {\n    ...state,\n    draftColumnWidths: updatedDraftColumnWidths,\n  };\n};\n","export const TABLE_EDIT_COMMAND_TYPE = 'editCommand';\n","export const TABLE_ADDED_TYPE = 'added';\nexport const TABLE_EDIT_TYPE = 'edit';\n","export const TABLE_HEADING_TYPE = 'heading';\n","import { TABLE_ADDED_TYPE, TABLE_EDIT_TYPE } from '../table-edit-row/constants';\nimport { TABLE_DATA_TYPE } from '../table/constants';\nimport { TABLE_HEADING_TYPE } from '../table-header-row/constants';\nimport { TABLE_EDIT_COMMAND_TYPE } from './constants';\n\nexport const isHeadingEditCommandsTableCell = (tableRow, tableColumn) =>\n  tableRow.type === TABLE_HEADING_TYPE && tableColumn.type === TABLE_EDIT_COMMAND_TYPE;\nexport const isEditCommandsTableCell = (tableRow, tableColumn) =>\n  (tableRow.type === TABLE_DATA_TYPE || tableRow.type === TABLE_ADDED_TYPE\n  || tableRow.type === TABLE_EDIT_TYPE) && tableColumn.type === TABLE_EDIT_COMMAND_TYPE;\n","import { TABLE_EDIT_COMMAND_TYPE } from './constants';\n\nexport const tableColumnsWithEditing = (tableColumns, width) =>\n  [{ key: TABLE_EDIT_COMMAND_TYPE, type: TABLE_EDIT_COMMAND_TYPE, width }, ...tableColumns];\n","import { TABLE_ADDED_TYPE, TABLE_EDIT_TYPE } from './constants';\nimport { TABLE_DATA_TYPE } from '../table/constants';\n\nexport const isEditTableCell = (tableRow, tableColumn) =>\n  (tableRow.type === TABLE_ADDED_TYPE || tableRow.type === TABLE_EDIT_TYPE)\n  && tableColumn.type === TABLE_DATA_TYPE;\nexport const isAddedTableRow = tableRow =>\n  tableRow.type === TABLE_ADDED_TYPE;\nexport const isEditTableRow = tableRow =>\n  tableRow.type === TABLE_EDIT_TYPE;\n","import { TABLE_ADDED_TYPE, TABLE_EDIT_TYPE } from './constants';\nimport { TABLE_DATA_TYPE } from '../table/constants';\n\nexport const tableRowsWithEditing = (tableRows, editingRows, addedRows, rowHeight) => {\n  const rowIds = new Set(editingRows);\n  const editedTableRows = tableRows\n    .map(tableRow => (\n      tableRow.type === TABLE_DATA_TYPE && rowIds.has(tableRow.rowId)\n        ? {\n          ...tableRow,\n          type: TABLE_EDIT_TYPE,\n          height: rowHeight,\n        }\n        : tableRow\n    ));\n\n  const addedTableRows = addedRows\n    .map((row, rowIndex) => ({\n      key: `${TABLE_ADDED_TYPE}_${rowIndex}`,\n      type: TABLE_ADDED_TYPE,\n      rowId: rowIndex,\n      height: rowHeight,\n      row,\n    }));\n\n  return [\n    ...addedTableRows.reverse(),\n    ...editedTableRows,\n  ];\n};\n","export const TABLE_FILTER_TYPE = 'filter';\n","import { TABLE_FILTER_TYPE } from './constants';\nimport { TABLE_DATA_TYPE } from '../table/constants';\n\nexport const isFilterTableCell = (tableRow, tableColumn) =>\n  tableRow.type === TABLE_FILTER_TYPE && tableColumn.type === TABLE_DATA_TYPE;\nexport const isFilterTableRow = tableRow => tableRow.type === TABLE_FILTER_TYPE;\n","import { TABLE_FILTER_TYPE } from './constants';\n\nexport const tableHeaderRowsWithFilter = (headerRows, rowHeight) =>\n  [...headerRows, { key: TABLE_FILTER_TYPE, type: TABLE_FILTER_TYPE, height: rowHeight }];\n","export const TABLE_GROUP_TYPE = 'group';\n","import { TABLE_GROUP_TYPE } from './constants';\n\nexport const isGroupTableCell = (tableRow, tableColumn) =>\n  tableRow.type === TABLE_GROUP_TYPE && tableColumn.type === TABLE_GROUP_TYPE\n  && tableRow.row.groupedBy === tableColumn.column.name;\nexport const isGroupIndentTableCell = (tableRow, tableColumn) =>\n  tableRow.type === TABLE_GROUP_TYPE && tableColumn.type === TABLE_GROUP_TYPE\n  && tableRow.row.groupedBy !== tableColumn.column.name;\nexport const isGroupTableRow = tableRow => tableRow.type === TABLE_GROUP_TYPE;\n","import { TABLE_DATA_TYPE } from '../table/constants';\nimport { TABLE_GROUP_TYPE } from './constants';\nimport { GROUP_ADD_MODE, GROUP_REMOVE_MODE } from '../grouping-state/constants';\n\nconst isGroupingChange = columnDraftGrouping => columnDraftGrouping.draft === GROUP_REMOVE_MODE\n  || columnDraftGrouping.draft === GROUP_ADD_MODE;\n\nconst tableColumnsWithDraftGrouping = (tableColumns, draftGrouping, showColumnWhenGrouped) =>\n  tableColumns\n    .reduce((acc, tableColumn) => {\n      const isDataColumn = tableColumn.type === TABLE_DATA_TYPE;\n      const tableColumnName = isDataColumn ? tableColumn.column.name : '';\n      const columnDraftGrouping = draftGrouping\n        .find(grouping => grouping.columnName === tableColumnName);\n\n      if (!columnDraftGrouping || showColumnWhenGrouped(tableColumnName)) {\n        return [...acc, tableColumn];\n      } else if (isGroupingChange(columnDraftGrouping)) {\n        return [...acc, {\n          ...tableColumn,\n          draft: true,\n        }];\n      }\n      return acc;\n    }, []);\n\nexport const tableColumnsWithGrouping = (\n  columns,\n  tableColumns,\n  grouping,\n  draftGrouping,\n  indentColumnWidth,\n  showColumnWhenGrouped,\n) => [\n  ...grouping.map((columnGrouping) => {\n    const groupedColumn = columns.find(column => column.name === columnGrouping.columnName);\n    return {\n      key: `${TABLE_GROUP_TYPE}_${groupedColumn.name}`,\n      type: TABLE_GROUP_TYPE,\n      column: groupedColumn,\n      width: indentColumnWidth,\n    };\n  }),\n  ...tableColumnsWithDraftGrouping(tableColumns, draftGrouping, showColumnWhenGrouped),\n];\n\nexport const tableRowsWithGrouping = (tableRows, isGroupRow) =>\n  tableRows.map((tableRow) => {\n    if (tableRow.type !== TABLE_DATA_TYPE || !isGroupRow(tableRow.row)) {\n      return tableRow;\n    }\n    return {\n      ...tableRow,\n      key: `${TABLE_GROUP_TYPE}_${tableRow.row.compoundKey}`,\n      type: TABLE_GROUP_TYPE,\n      colSpanStart: `${TABLE_GROUP_TYPE}_${tableRow.row.groupedBy}`,\n    };\n  });\n","import { TABLE_HEADING_TYPE } from './constants';\nimport { TABLE_DATA_TYPE } from '../table/constants';\n\nexport const isHeadingTableCell = (tableRow, tableColumn) =>\n  tableRow.type === TABLE_HEADING_TYPE && tableColumn.type === TABLE_DATA_TYPE;\n\nexport const isHeadingTableRow = tableRow => (tableRow.type === TABLE_HEADING_TYPE);\n","import { TABLE_HEADING_TYPE } from './constants';\n\nexport const tableRowsWithHeading = headerRows =>\n  [{ key: TABLE_HEADING_TYPE, type: TABLE_HEADING_TYPE }, ...headerRows];\n","export const TABLE_DETAIL_TYPE = 'detail';\n","import { TABLE_DETAIL_TYPE } from './constants';\nimport { TABLE_DATA_TYPE } from '../table/constants';\n\nexport const isDetailRowExpanded = (expandedRows, rowId) => expandedRows.indexOf(rowId) > -1;\nexport const isDetailToggleTableCell = (tableRow, tableColumn) =>\n  tableColumn.type === TABLE_DETAIL_TYPE && tableRow.type === TABLE_DATA_TYPE;\nexport const isDetailTableRow = tableRow => tableRow.type === TABLE_DETAIL_TYPE;\n","export const setDetailRowExpanded = (prevExpanded, { rowId, isExpanded }) => {\n  const expandedRows = prevExpanded.slice();\n  const expandedIndex = expandedRows.indexOf(rowId);\n  const isRowExpanded = isExpanded !== undefined ? isExpanded : expandedIndex === -1;\n\n  if (expandedIndex > -1 && !isRowExpanded) {\n    expandedRows.splice(expandedIndex, 1);\n  } else if (expandedIndex === -1 && isRowExpanded) {\n    expandedRows.push(rowId);\n  }\n\n  return expandedRows;\n};\n","import { TABLE_DETAIL_TYPE } from './constants';\nimport { TABLE_DATA_TYPE } from '../table/constants';\n\nexport const tableRowsWithExpandedDetail = (tableRows, expandedRows, rowHeight) => {\n  let result = tableRows;\n  expandedRows\n    .forEach((expandedRowId) => {\n      const rowIndex = result.findIndex(tableRow =>\n        tableRow.type === TABLE_DATA_TYPE && tableRow.rowId === expandedRowId);\n      if (rowIndex === -1) return;\n      const insertIndex = rowIndex + 1;\n      const { row, rowId } = result[rowIndex];\n      result = [\n        ...result.slice(0, insertIndex),\n        {\n          key: `${TABLE_DETAIL_TYPE}_${rowId}`,\n          type: TABLE_DETAIL_TYPE,\n          rowId,\n          row,\n          colSpanStart: 0,\n          height: rowHeight,\n        },\n        ...result.slice(insertIndex),\n      ];\n    });\n  return result;\n};\n\nexport const tableColumnsWithDetail = (tableColumns, toggleColumnWidth) => [\n  { key: TABLE_DETAIL_TYPE, type: TABLE_DETAIL_TYPE, width: toggleColumnWidth },\n  ...tableColumns,\n];\n","export const TABLE_SELECT_TYPE = 'select';\n","import { TABLE_SELECT_TYPE } from './constants';\nimport { TABLE_DATA_TYPE } from '../table/constants';\nimport { TABLE_HEADING_TYPE } from '../table-header-row/constants';\n\nexport const isSelectTableCell = (tableRow, tableColumn) =>\n  tableColumn.type === TABLE_SELECT_TYPE && tableRow.type === TABLE_DATA_TYPE;\nexport const isSelectAllTableCell = (tableRow, tableColumn) =>\n  tableColumn.type === TABLE_SELECT_TYPE && tableRow.type === TABLE_HEADING_TYPE;\n","import { TABLE_SELECT_TYPE } from './constants';\n\nexport const tableColumnsWithSelection = (tableColumns, selectionColumnWidth) => [\n  { key: TABLE_SELECT_TYPE, type: TABLE_SELECT_TYPE, width: selectionColumnWidth },\n  ...tableColumns,\n];\n","import { TABLE_DATA_TYPE, TABLE_NODATA_TYPE } from './constants';\n\nexport const isNoDataTableRow = tableRow => tableRow.type === TABLE_NODATA_TYPE;\nexport const isDataTableCell = (tableRow, tableColumn) =>\n  tableRow.type === TABLE_DATA_TYPE && tableColumn.type === TABLE_DATA_TYPE;\nexport const isHeaderStubTableCell = (tableRow, headerRows) => headerRows.indexOf(tableRow) > -1;\nexport const isDataTableRow = tableRow => tableRow.type === TABLE_DATA_TYPE;\n","export const getColumnExtension = (columnExtensions, columnName) => {\n  if (!columnExtensions) {\n    return {};\n  }\n  const columnExtension = columnExtensions.find(extension => extension.columnName === columnName);\n  if (!columnExtension) {\n    return {};\n  }\n  return columnExtension;\n};\n","import { TABLE_DATA_TYPE, TABLE_NODATA_TYPE } from './constants';\nimport { getColumnExtension } from '../../utils/column';\n\nexport const tableColumnsWithDataRows = (columns, columnExtensions) =>\n  columns.map((column) => {\n    const { name } = column;\n    const columnExtension = getColumnExtension(columnExtensions, name);\n    return {\n      key: `${TABLE_DATA_TYPE}_${name}`,\n      type: TABLE_DATA_TYPE,\n      width: columnExtension.width,\n      align: columnExtension.align,\n      column,\n    };\n  });\n\nexport const tableRowsWithDataRows = (rows, getRowId) => (\n  !rows.length\n    ? [{ key: TABLE_NODATA_TYPE, type: TABLE_NODATA_TYPE, colSpanStart: 0 }]\n    : rows.map((row) => {\n      const rowId = getRowId(row);\n      return {\n        row,\n        rowId,\n        type: TABLE_DATA_TYPE,\n        key: `${TABLE_DATA_TYPE}_${rowId}`,\n      };\n    }));\n","import { TABLE_DATA_TYPE } from './../table/constants';\n\nexport const visibleTableColumns = (tableColumns, hiddenColumns) =>\n  tableColumns.filter(tableColumn =>\n    tableColumn.type !== TABLE_DATA_TYPE || hiddenColumns.indexOf(tableColumn.column.name) === -1);\n","export const columnChooserItems = (columns, hiddenColumns) =>\n  columns.map(column => ({ column, hidden: hiddenColumns.indexOf(column.name) !== -1 }));\n","export const toggleColumn = (hiddenColumns, columnName) => (\n  hiddenColumns.indexOf(columnName) === -1\n    ? [...hiddenColumns, columnName]\n    : hiddenColumns.filter(hiddenColumn => hiddenColumn !== columnName)\n);\n","export const getTargetColumnGeometries = (columnGeometries, sourceIndex) => {\n  const sourceWidth = columnGeometries[sourceIndex].right - columnGeometries[sourceIndex].left;\n  const getWidthDifference = index =>\n    columnGeometries[index].right - columnGeometries[index].left - sourceWidth;\n\n  return columnGeometries\n    .map(({\n      top, right, bottom, left,\n    }, targetIndex) => {\n      let leftBorder = left;\n      if (targetIndex > 0 && targetIndex <= sourceIndex) {\n        leftBorder = Math.min(leftBorder, leftBorder - getWidthDifference(targetIndex - 1));\n      }\n      if (targetIndex > sourceIndex) {\n        leftBorder = Math.max(leftBorder, leftBorder + getWidthDifference(targetIndex));\n      }\n      let rightBorder = right;\n      if (targetIndex < columnGeometries.length - 1 && targetIndex >= sourceIndex) {\n        rightBorder = Math.max(rightBorder, rightBorder + getWidthDifference(targetIndex + 1));\n      }\n      if (targetIndex < sourceIndex) {\n        rightBorder = Math.min(rightBorder, rightBorder - getWidthDifference(targetIndex));\n      }\n\n      return {\n        top,\n        right: rightBorder,\n        bottom,\n        left: leftBorder,\n      };\n    });\n};\n","import { easeOutCubic } from '@devexpress/dx-core';\nimport { getTargetColumnGeometries } from './column-geometries';\n\nexport const getTableRowColumnsWithColSpan = (tableColumns, colSpanStart) => {\n  if (colSpanStart === undefined) return tableColumns;\n\n  let span = false;\n  return tableColumns\n    .reduce((acc, tableColumn, columnIndex) => {\n      if (span) return acc;\n      if (columnIndex === colSpanStart || tableColumn.key === colSpanStart) {\n        span = true;\n        return [...acc, { ...tableColumn, colSpan: tableColumns.length - columnIndex }];\n      }\n      return [...acc, tableColumn];\n    }, []);\n};\n\nexport const getTableColumnGeometries = (columns, tableWidth) => {\n  const columnWidths = columns\n    .map(column => column.width);\n\n  const freeSpace = tableWidth;\n  const restrictedSpace = columnWidths\n    .reduce((accum, width) => accum + (width || 0), 0);\n  const freeSpacePortions = columnWidths\n    .reduce((accum, width) => accum + (width === undefined ? 1 : 0), 0);\n  const freeSpacePortion = (freeSpace - restrictedSpace) / freeSpacePortions;\n\n  let lastRightPosition = 0;\n  return columnWidths\n    .map(width => (width === undefined ? freeSpacePortion : width))\n    .map((width) => {\n      lastRightPosition += width;\n      return {\n        left: lastRightPosition - width,\n        right: lastRightPosition,\n      };\n    });\n};\n\nexport const getTableTargetColumnIndex = (columnGeometries, sourceIndex, offset) =>\n  getTargetColumnGeometries(columnGeometries, sourceIndex)\n    .findIndex(({ left, right }) => offset > left && offset < right);\n\n\nconst ANIMATION_DURATION = 200;\n\nconst getAnimationProgress = animation =>\n  (new Date().getTime() - animation.startTime) / ANIMATION_DURATION;\n\nexport const getAnimations = (\n  prevColumns,\n  nextColumns,\n  tableWidth,\n  prevAnimations,\n) => {\n  const prevColumnGeometries = new Map(getTableColumnGeometries(prevColumns, tableWidth)\n    .map((geometry, index) => [prevColumns[index].key, geometry])\n    .map(([key, geometry]) => {\n      const animation = prevAnimations.get(key);\n      if (!animation) return [key, geometry];\n      const progress = easeOutCubic(getAnimationProgress(animation));\n      const left = ((animation.left.to - animation.left.from) * progress) + animation.left.from;\n      return [key, {\n        left,\n        right: geometry.right - (geometry.left - left),\n      }];\n    }));\n\n  const nextColumnGeometries = new Map(getTableColumnGeometries(nextColumns, tableWidth)\n    .map((geometry, index) => [nextColumns[index].key, geometry]));\n\n  return new Map([...nextColumnGeometries.keys()]\n    .map((key) => {\n      const prev = prevColumnGeometries.get(key);\n      const next = nextColumnGeometries.get(key);\n\n      const result = { startTime: new Date().getTime(), style: {} };\n      if (Math.abs(prev.left - next.left) > 1) {\n        result.left = { from: prev.left, to: next.left };\n      }\n      return [key, result];\n    })\n    .filter(animation => animation[1].left));\n};\n\nexport const filterActiveAnimations = animations => new Map([...animations.entries()]\n  .filter(([, animation]) => getAnimationProgress(animation) < 1));\n\nexport const evalAnimations = animations => new Map([...animations.entries()]\n  .map(([key, animation]) => {\n    const progress = easeOutCubic(getAnimationProgress(animation));\n    const result = { ...animation.style };\n    if (animation.left) {\n      const offset = (animation.left.to - animation.left.from) * (progress - 1);\n      result.transform = `translateX(${offset}px)`;\n    }\n    return [key, result];\n  }));\n","import { getTargetColumnGeometries } from './column-geometries';\n\nconst isOnTheSameLine = (geometry, y) => y >= geometry.top && y <= geometry.bottom;\n\nconst rectToObject = ({\n  top, right, bottom, left,\n}) => ({\n  top, right, bottom, left,\n});\n\nconst collapseGapsBetweenItems = geometries =>\n  geometries.map((geometry, index) => {\n    if (index !== geometries.length - 1 && geometry.top === geometries[index + 1].top) {\n      return {\n        ...geometry,\n        right: geometries[index + 1].left,\n      };\n    }\n    return geometry;\n  });\n\nexport const getGroupCellTargetIndex = (geometries, sourceIndex, { x, y }) => {\n  if (geometries.length === 0) return 0;\n\n  const targetGeometries = sourceIndex !== -1\n    ? getTargetColumnGeometries(geometries, sourceIndex)\n    : geometries.map(rectToObject);\n\n  const targetIndex = collapseGapsBetweenItems(targetGeometries)\n    .findIndex((geometry, index) => {\n      const inVerticalBounds = isOnTheSameLine(geometry, y);\n      const inHorizontalBounds = x >= geometry.left && x <= geometry.right;\n      const shouldGoFirst = index === 0 && x < geometry.left;\n      const shouldGoOnLineBreak = !inVerticalBounds &&\n        !!geometries[index - 1] &&\n        isOnTheSameLine(geometries[index - 1], y);\n\n      return (inVerticalBounds && inHorizontalBounds) ||\n        shouldGoFirst ||\n        shouldGoOnLineBreak;\n    });\n\n  return targetIndex === -1 ? geometries.length : targetIndex;\n};\n","const processPattern = (pattern, params) =>\n  Object.keys(params).reduce(\n    (msg, key) =>\n      msg.replace(`{${key}}`, params[key]),\n    pattern,\n  );\n\nexport const getMessagesFormatter = messages => (key, params) => {\n  const message = messages[key];\n\n  if (typeof message === 'function') {\n    return message(params);\n  }\n  if (params) {\n    return processPattern(message, params);\n  }\n  return message;\n};\n"],"names":["rowIdGetter","getRowId","rows","map","Map","row","rowIndex","get","defaultGetCellValue","columnName","cellValueGetter","getCellValue","columns","useFastAccessor","reduce","acc","column","name","setColumnSorting","state","direction","keepOther","sortIndex","sorting","nextSorting","slice","Array","isArray","filter","indexOf","columnSorting","columnSortingIndex","findIndex","newColumnSorting","splice","newIndexFallback","length","newIndex","undefined","getColumnSortingDirection","s","merge","array","auxiliary","lo","mid","hi","compare","i","j","k","cmp","sortArrayToAuxiliary","Math","floor","sortAuxiliaryToArray","a","b","result","NODE_CHECK","Symbol","rowsToTree","getRowLevelKey","levels","children","forEach","levelKey","levelIndex","level","root","node","push","treeToRows","tree","defaultCompare","createCompare","getColumnCompare","getComparableValue","reverse","prevCompare","inverse","columnCompare","aRow","bRow","sortTree","sortedTree","mergeSort","sortHierarchicalRows","sortedRows","isGroupRow","groupedBy","value","setColumnFilter","filters","config","filterIndex","f","nextState","getColumnFilterConfig","_","toLowerCase","String","defaultPredicate","filterTree","predicate","filteredChildren","filterHierarchicalRows","filteredTree","collapsedRows","filteredRows","getColumnPredicate","prevPredicate","filterConfig","customPredicate","columnPredicate","GROUP_KEY_SEPARATOR","GROUP_ADD_MODE","GROUP_REMOVE_MODE","GROUP_REORDER_MODE","groupByColumn","groupIndex","grouping","groupingIndex","g","targetIndex","ungroupedColumnIndex","group","index","filteredExpandedGroups","expandedGroups","split","toggleExpandedGroups","groupKey","groupKeyIndex","draftGroupingChange","groupingChange","cancelGroupingChange","draftGrouping","draft","GRID_GROUP_TYPE","GRID_GROUP_CHECK","GRID_GROUP_LEVEL_KEY","groupRowChecker","groupRowLevelKeyGetter","defaultColumnCriteria","groupedRows","getColumnCriteria","keyPrefix","groupCriteria","groups","key","sameKeyItems","set","nestedGrouping","values","items","compoundKey","expandedGroupRows","groupingColumnNames","columnGrouping","currentGroupExpanded","currentGroupLevel","groupLevel","has","customGroupedRows","currentRows","getChildGroups","rootRows","childRows","customGroupingRowIdGetter","firstRow","find","groupingPanelItems","c","setCurrentPage","prevPage","page","setPageSize","prevPageSize","size","PAGE_HEADERS_OVERFLOW_ERROR","paginatedRows","pageSize","rowsWithPageHeaders","headerRows","currentIndex","headerIndex","headerRow","Error","indexInPage","pageCount","count","ceil","rowCount","firstRowOnPage","currentPage","totalCount","lastRowOnPage","totalRowCount","setRowSelection","selection","rowId","selected","selectedRows","selectedIndex","isRowSelected","setRowsSelection","rowIds","rowIdsSet","Set","isRowsSelected","availableSelection","selectionSet","getAvailableToSelect","dataRows","someSelected","availableToSelect","some","elem","allSelected","startEditRows","prevEditingRows","stopEditRows","rowIdSet","id","addRow","addedRows","changeAddedRow","change","cancelAddedRows","indexSet","changeRow","prevChangedRows","prevChange","cancelChanges","deleteRows","deletedRows","cancelDeletedRows","changedRowsByIds","changes","addedRowsByIds","defaultCreateRowChange","createRowChangeGetter","createRowChange","columnExtensions","columnExtension","getRowChange","changedRows","TABLE_REORDERING_TYPE","changeColumnOrder","order","sourceColumnName","targetColumnName","sourceColumnIndex","targetColumnIndex","newOrder","TABLE_DATA_TYPE","TABLE_NODATA_TYPE","orderedColumns","tableColumns","sort","type","aPos","bPos","tableHeaderRowsWithReordering","tableHeaderRows","draftOrder","sourceColumn","UNSET_COLUMN_WIDTH_ERROR","join","tableColumnsWithWidths","columnWidths","draftColumnWidths","tableColumn","width","replace","MIN_SIZE","changeTableColumnWidths","shifts","updatedColumnWidths","Object","keys","max","assign","changeDraftTableColumnWidths","updatedDraftColumnWidths","TABLE_EDIT_COMMAND_TYPE","TABLE_ADDED_TYPE","TABLE_EDIT_TYPE","TABLE_HEADING_TYPE","isHeadingEditCommandsTableCell","tableRow","isEditCommandsTableCell","tableColumnsWithEditing","isEditTableCell","isAddedTableRow","isEditTableRow","tableRowsWithEditing","tableRows","editingRows","rowHeight","editedTableRows","addedTableRows","TABLE_FILTER_TYPE","isFilterTableCell","isFilterTableRow","tableHeaderRowsWithFilter","height","TABLE_GROUP_TYPE","isGroupTableCell","isGroupIndentTableCell","isGroupTableRow","isGroupingChange","columnDraftGrouping","tableColumnsWithDraftGrouping","showColumnWhenGrouped","isDataColumn","tableColumnName","tableColumnsWithGrouping","indentColumnWidth","groupedColumn","tableRowsWithGrouping","isHeadingTableCell","isHeadingTableRow","tableRowsWithHeading","TABLE_DETAIL_TYPE","isDetailRowExpanded","expandedRows","isDetailToggleTableCell","isDetailTableRow","setDetailRowExpanded","prevExpanded","isExpanded","expandedIndex","isRowExpanded","tableRowsWithExpandedDetail","expandedRowId","insertIndex","tableColumnsWithDetail","toggleColumnWidth","TABLE_SELECT_TYPE","isSelectTableCell","isSelectAllTableCell","tableColumnsWithSelection","selectionColumnWidth","isNoDataTableRow","isDataTableCell","isHeaderStubTableCell","isDataTableRow","getColumnExtension","extension","tableColumnsWithDataRows","align","tableRowsWithDataRows","colSpanStart","visibleTableColumns","hiddenColumns","columnChooserItems","hidden","toggleColumn","hiddenColumn","getTargetColumnGeometries","columnGeometries","sourceIndex","sourceWidth","right","left","getWidthDifference","top","bottom","leftBorder","min","rightBorder","getTableRowColumnsWithColSpan","span","columnIndex","colSpan","getTableColumnGeometries","tableWidth","freeSpace","restrictedSpace","accum","freeSpacePortions","freeSpacePortion","lastRightPosition","getTableTargetColumnIndex","offset","ANIMATION_DURATION","getAnimationProgress","Date","getTime","animation","startTime","getAnimations","prevColumns","nextColumns","prevAnimations","prevColumnGeometries","geometry","progress","easeOutCubic","to","from","nextColumnGeometries","prev","next","style","abs","filterActiveAnimations","animations","entries","evalAnimations","transform","isOnTheSameLine","y","rectToObject","collapseGapsBetweenItems","geometries","getGroupCellTargetIndex","x","targetGeometries","inVerticalBounds","inHorizontalBounds","shouldGoFirst","shouldGoOnLineBreak","processPattern","pattern","params","msg","getMessagesFormatter","message","messages"],"mappings":"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"}